<script type="module" src="./main.mjs"></script>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", () => {
        let oldrect = null;
        const resizeHandler = () => {
            const rect =
                document.getElementById("display").getBoundingClientRect();
            if (!oldrect ||
                    rect.height != oldrect.height ||
                    rect.width != oldrect.width) {
                oldrect = rect;

                document.getElementById("displaycontianer").style.width =
                    `${rect.width}px`;
                document.getElementById("displaycontianer").style.height =
                    `${rect.height}px`;
            }
            requestAnimationFrame(resizeHandler);
        };
        resizeHandler();
    });
</script>

<style>
.button {
    border-style: solid;
    margin-bottom: 1em;
    padding: 1em;
    text-align: center;
}

.button:hover {
    cursor: pointer;
    border-style: dashed;
}

.button-selected {
    border-style: dashed;
    background: #2b2b2b40;
}

.button:active {
    border-style: dashed;
    background: #2b2b2b40;
}

.icon {
    height: 2em;
    vertical-align: middle;
}

.column {
    float: left;
    margin-right: 1em;
    height: 100%;
}

.menu {
    max-height: 75%;
    overflow: auto;
    width: 100%;
}

canvas {
    height: 100%;
}
</style>

<div>
    <div id="console" class="column" style="width: 10%">
        Debugging info:
        <br>
        <button id="step">step</button>
        <button id="resume">resume</button>
        <p id="fps"></p>
        <p id="entitycount"></p>
    </div>
    <div id="container" class="column" style="width: 85%;">
        <div id="displaycontianer" class="column">
            <canvas id="display"/>
        </div>
        <div id="menucontainer" class="column" style="width: 20%">
            <h1>Menu</h1>
            <hr>
            <p id="money"/>
            <div id="menu" class="menu">
                <div id="foxbutton" class="button">
                    <img src="../assets/foxTower.png" class="icon"></img>
                    Fox Tower (10)
                </div>
                <div id="tacksbutton" class="button">
                    <img src="../assets/thumbTacks.png" class="icon"></img>
                    Thumb Tacks (5)
                </div>
            </div>
            <div id="upgrademenu" class="menu" style="width: 100%;">
            </div>
            <br>
            <hr>
            <div class="button" id="spawn">
                spawn wave
            </div>
        </div>
    </div>
</div>
